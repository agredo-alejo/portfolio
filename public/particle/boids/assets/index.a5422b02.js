var ct=Object.defineProperty;var ft=(i,t,s)=>t in i?ct(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var c=(i,t,s)=>(ft(i,typeof t!="symbol"?t+"":t,s),s);const mt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))h(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&h(u)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function h(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}};mt();let H=0,gt=300;const L={callback:()=>{},animate:i=>{L.callback=i}},T=()=>{requestAnimationFrame(T);let i=Date.now(),t=i-H,s=1e3/gt;t>s&&(H=i-t%s,L.callback())};var y={},x={};Object.defineProperty(x,"__esModule",{value:!0});x.Vector=void 0;class g{constructor(t=0,s=0,h=0){this.x=t,this.y=s,this.z=h}add(t,s=0,h=0){return typeof t=="number"?(this.x+=t,this.y+=s,this.z+=h,this):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}sub(t,s=0,h=0){return typeof t=="number"?(this.x-=t,this.y-=s,this.z-=h,this):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}mult(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this):this}div(t){return!isFinite(t)||t==0?this:(this.x/=t,this.y/=t,this.z/=t,this)}set(t,s=0,h=0){return typeof t!="number"?(this.x=t.x,this.y=t.y,this.z=t.z,this):(this.x=t,this.y=s,this.z=h,this)}copy(){return new g(this.x,this.y,this.z)}magSq(){return this.x*this.x+this.y*this.y+this.z*this.z}get mag(){return Math.hypot(this.x,this.y,this.z)}set mag(t){this.div(this.mag).mult(t)}normalize(){let t=Math.hypot(this.x,this.y,this.z);return t===0?this.set(0,0,0):this.div(t)}max(t){return this.mag>t.mag?this:t}min(t){return this.mag<t.mag?this:t}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}dist(t){return Math.hypot(this.x-t.x,this.y-t.y,this.z-t.z)}distSq(t){return Math.hypot(this.x-t.x,this.y-t.y,this.z-t.z)**2}cross(t){return new g(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}maxMag(t){let s=Math.hypot(this.x,this.y,this.z);return s>t?this.div(s).mult(t):this}minMag(t){let s=Math.hypot(this.x,this.y,this.z);return s<t?this.div(s).mult(t):this}constrainMag(t,s){let h=Math.hypot(this.x,this.y,this.z);return h<t?this.div(h).mult(t):h>s?this.div(h).mult(s):this}toArray(){return[this.x,this.y,this.z]}changeOfBasis(t=new g(1),s=new g(0,1),h=new g(0,0,1)){let a=this.x,o=this.y,u=this.z;return this.x=a*t.x+o*s.x+u*h.x,this.y=a*t.y+o*s.y+u*h.y,this.z=a*t.z+o*s.z+u*h.z,this}lerp(t,s){const h=Math.min(Math.max(s,0),1);return this.x+=(t.x-this.x)*h,this.y+=(t.y-this.y)*h,this.z+=(t.z-this.z)*h,this}angleBetween(t){let s=this.mag*t.mag;if(s==0)return 0;let h=this.dot(t)/s;return Math.acos(Math.max(Math.min(h,1),-1))}get direction(){return Math.atan2(this.y,this.x)}set direction(t){this.x=Math.cos(t),this.y=Math.sin(t)}set direction3D(t){this.x=Math.sin(t[1])*Math.cos(t[0]),this.y=Math.sin(t[1])*Math.sin(t[0]),this.z=Math.cos(t[1])}get direction3D(){return[Math.atan2(this.y,this.x),Math.atan2(Math.hypot(this.x,this.y),this.z)]}rotate(t){let s=Math.cos(t),h=Math.sin(t),a=this.x;return this.x=a*s+this.y*-h||0,this.y=a*h+this.y*s||0,this}rotateX(t){let s=Math.cos(t),h=Math.sin(t),a=this.y;return this.y=a*s+this.z*-h||0,this.z=a*h+this.z*s||0,this}rotateY(t){let s=Math.cos(t),h=Math.sin(t),a=this.x;return this.x=a*s+this.z*h||0,this.z=a*-h+this.z*s||0,this}}x.Vector=g;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.createVector=i.one=i.zero=i.back=i.forward=i.down=i.up=i.left=i.right=i.scalarProyection=i.random3D=i.random2D=i.fromAngles=i.fromAngle=i.rotateY=i.rotateX=i.rotate=i.angleBetween=i.lerp=i.changeOfBasis=i.toArray=i.dot=i.cross=i.distSq=i.dist=i.equals=i.min=i.max=i.setMag=i.normalize=i.div=i.mult=i.sub=i.add=i.Vector=void 0;const t=x;Object.defineProperty(i,"Vector",{enumerable:!0,get:function(){return t.Vector}});const s=(n,e,r=0,l=0)=>e instanceof t.Vector?new t.Vector(n.x+e.x,n.y+e.y,n.z+e.z):new t.Vector(n.x+e,n.y+r,n.z+l);i.add=s;const h=(n,e,r=0,l=0)=>e instanceof t.Vector?new t.Vector(n.x-e.x,n.y-e.y,n.z-e.z):new t.Vector(n.x-e,n.y-r,n.z-l);i.sub=h;const a=(n,e)=>isFinite(e)?new t.Vector(n.x*e,n.y*e,n.z*e):new t.Vector(n.x,n.y,n.z);i.mult=a;const o=(n,e)=>{if(e!==0&&isFinite(e)){let r=1/e;return new t.Vector(n.x*r,n.y*r,n.z*r)}return new t.Vector(n.x,n.y,n.z)};i.div=o;const u=n=>(0,i.div)(n,Math.hypot(n.x,n.y,n.z));i.normalize=u;const f=(n,e)=>(0,i.div)(n,Math.hypot(n.x,n.y,n.z)).mult(e);i.setMag=f;const w=(n,e)=>n.mag>e.mag?n.copy():e.copy();i.max=w;const p=(n,e)=>n.mag<e.mag?n.copy():e.copy();i.min=p;const $=(n,e)=>n.x==e.x&&n.y==e.y&&n.z==e.z;i.equals=$;const I=(n,e)=>Math.hypot(n.x-e.x,n.y-e.y,n.z-e.z);i.dist=I;const k=(n,e)=>Math.hypot(n.x-e.x,n.y-e.y,n.z-e.z)**2;i.distSq=k;const R=(n,e)=>new t.Vector(n.y*e.z-n.z*e.y,n.z*e.x-n.x*e.z,n.x*e.y-n.y*e.x);i.cross=R;const N=(n,e)=>n.x*e.x+n.y*e.y+n.z*e.z;i.dot=N;const K=n=>[n.x,n.y,n.z];i.toArray=K;const _=(n,e=new t.Vector(1),r=new t.Vector(0,1),l=new t.Vector(0,0,1))=>new t.Vector(n.x*e.x+n.y*r.x+n.z*l.x,n.x*e.y+n.y*r.y+n.z*l.y,n.x*e.z+n.y*r.z+n.z*l.z);i.changeOfBasis=_;const j=(n,e,r)=>new t.Vector(n.x+(e.x-n.x)*r,n.y+(e.y-n.y)*r,n.z+(e.z-n.z)*r);i.lerp=j;const G=(n,e)=>{let r=n.mag*e.mag;if(r!==0){let l=n.dot(e)/r;return Math.acos(Math.max(Math.min(l,1),-1))}};i.angleBetween=G;const J=(n,e)=>{let r=Math.cos(e),l=Math.sin(e);return new t.Vector(n.x*r+n.y*-l,n.x*l+n.y*r,n.z)};i.rotate=J;const Q=(n,e)=>{let r=Math.cos(e),l=Math.sin(e);return new t.Vector(n.x,n.y*r+n.z*-l,n.y*l+n.z*r)};i.rotateX=Q;const U=(n,e)=>{let r=Math.cos(e),l=Math.sin(e);return new t.Vector(n.x*r+n.z*l,n.y,n.x*-l+n.z*r)};i.rotateY=U;const Z=n=>new t.Vector(Math.cos(n),Math.sin(n));i.fromAngle=Z;const v=(n,e)=>new t.Vector(Math.sin(e)*Math.cos(n),Math.sin(e)*Math.sin(n),Math.cos(e));i.fromAngles=v;const tt=()=>(0,i.fromAngle)(Math.random()*Math.PI*2);i.random2D=tt;const it=()=>(0,i.fromAngles)(Math.random()*Math.PI*2,Math.random()*Math.PI*2);i.random3D=it;const nt=(n,e,r)=>{let l=(0,i.sub)(e,n),yt=(0,i.sub)(r,n);return l.normalize(),l.mult(yt.dot(l)),(0,i.add)(n,l)};i.scalarProyection=nt;const et=()=>new t.Vector(1,0,0);i.right=et;const st=()=>new t.Vector(-1,0,0);i.left=st;const ht=()=>new t.Vector(0,1,0);i.up=ht;const at=()=>new t.Vector(0,-1,0);i.down=at;const rt=()=>new t.Vector(0,0,1);i.forward=rt;const ot=()=>new t.Vector(0,0,-1);i.back=ot;const lt=()=>new t.Vector;i.zero=lt;const ut=()=>new t.Vector(1,1,1);i.one=ut;const dt=(n=0,e=0,r=0)=>new t.Vector(n,e,r);i.createVector=dt})(y);const zt=Math.PI*2,Mt=(i,t=0,s=0,h=1)=>i instanceof Array?`rgba( ${i[0]}, ${i[1]}, ${i[2]}, ${i[3]||1})`:`rgba( ${i}, ${t}, ${s}, ${h})`;function wt(i,t){if(!t){i.fill();return}i.save(),i.fillStyle=t,i.fill(),i.restore()}const pt=i=>{i.clearRect(0,0,i.canvas.width,i.canvas.height)},bt=(i,t,s,h,a,o)=>{i.beginPath(),i.arc(t.x,t.y,s||i.lineWidth,h||0,a||zt,o)},At=(i,t,s,h,a,o,u)=>{i.beginPath(),i.moveTo(t,s),i.lineTo(h,a),i.lineTo(o,u),i.closePath()},d={x:void 0,y:void 0,dragging:!1},Ot=i=>{d.x=i.clientX,d.y=i.clientY},Vt=i=>{d.x=i.targetTouches[0].pageX,d.y=i.targetTouches[0].pageY},xt=i=>{d.x=i.clientX,d.y=i.clientY,d.dragging=!0},Pt=i=>{d.x=i.targetTouches[0].pageX,d.y=i.targetTouches[0].pageY,d.dragging=!0},q=()=>{d.dragging=!1},St=()=>{addEventListener("mousemove",Ot),addEventListener("touchmove",Vt),addEventListener("mousedown",xt),addEventListener("touchstart",Pt),addEventListener("mouseup",q),addEventListener("touchend",q)},Wt=i=>{i.width=innerWidth,i.height=innerHeight},Ft=i=>{addEventListener("resize",()=>Wt(i))},C=(i,t,s)=>Math.max(Math.min(i,s),t);class Lt{constructor(){c(this,"position");c(this,"velocity");c(this,"size");c(this,"aceleration");c(this,"maxForce");c(this,"maxSpeed");this.position=new y.Vector(Math.random()*innerWidth,Math.random()*innerHeight),this.velocity=y.random2D(),this.size=S/500,innerWidth==A&&(this.size=S/250),this.aceleration=new y.Vector,this.maxForce=.5,this.maxSpeed=3}behaviour(t){let s=70,h=30,a=0,o=0,u=[];for(let f=0;f<3;f++)u.push(new y.Vector);for(let f of t){if(f===this)continue;let w=y.sub(this.position,f.position),p=w.mag;p<s&&(u[0].add(f.velocity),u[1].add(f.position),a++),p<h&&(w.div(p),u[2].add(w),o++)}return a>0&&(u[1].div(a),u[1].sub(this.position),this.steer(u[0]),this.steer(u[1])),o>0&&this.steer(u[2]),u}steer(t){t.mag=this.maxSpeed,t.sub(this.velocity),t.maxMag(this.maxForce)}flock(t){let s=this.behaviour(t),h=s[0],a=s[1],o=s[2];o.mult(1.25),this.applyForce(h),this.applyForce(a),this.applyForce(o)}draw(){m.save(),m.translate(this.position.x,this.position.y),m.rotate(this.velocity.direction),At(m,this.size*1.75,0,this.size*-.5,this.size*.8,this.size*-.5,this.size*-.8),m.fill(),m.restore()}edges(){this.position.x>innerWidth?this.position.x=0:this.position.x<0&&(this.position.x=innerWidth),this.position.y>innerHeight?this.position.y=0:this.position.y<0&&(this.position.y=innerHeight)}update(){let t=Math.floor(this.position.x/z),s=Math.floor(this.position.y/z);M[s][t].push(this),this.flock(M[s][t]),this.velocity.add(this.aceleration),this.velocity.maxMag(this.maxSpeed),this.position.add(this.velocity),this.edges(),this.draw(),this.aceleration.mult(0)}applyForce(t){this.aceleration.add(t)}}class Ht{constructor(){c(this,"position");c(this,"velocity");c(this,"radius");c(this,"maxSpeed");this.position=new y.Vector(Math.random()*innerWidth,Math.random()*innerHeight),this.velocity=new y.Vector,this.radius=A*.006,this.maxSpeed=A*.003}draw(){bt(m,this.position,this.radius),wt(m,Mt(255,0,0))}edges(){this.position.x>innerWidth?this.position.x=0:this.position.x<0&&(this.position.x=innerWidth),this.position.y>innerHeight?this.position.y=0:this.position.y<0&&(this.position.y=innerHeight)}update(){let t=y.random2D().mult(.5);this.velocity.add(t),this.velocity.maxMag(this.maxSpeed),this.position.add(this.velocity),this.edges()}}const O=document.querySelector("canvas"),m=O.getContext("2d");let S=Math.hypot(innerWidth,innerHeight),A=Math.min(innerWidth,innerHeight),z,M,b,W,V,F,P,X,qt=2,D,B;const E=(i,t)=>{if(!(i.position.dist(t)>=X))return y.sub(i.position,t)},Ct=(i,t,s=0)=>Array(i).fill(void 0).map(()=>Array(t).fill(s));function Y(){O.width=innerWidth,O.height=innerHeight,W=[],V=[],F=new y.Vector,P=new y.Vector(innerWidth,innerHeight),S=P.mag,X=P.mag*.05,b=(innerHeight+innerWidth)/5,innerWidth==A&&(b=(innerHeight+innerWidth)/10),b=C(b,1,400),z=A/2.5,z=C(z,1,1/0),D=Math.floor(innerWidth/z)+1,B=Math.floor(innerHeight/z)+1,M=Ct(B,D,[]);for(let i=0;i<b;i++)W.push(new Lt);for(let i=0;i<qt;i++)V.push(new Ht)}addEventListener("dblclick",Y);St();Ft(O);function Dt(){pt(m),d.x&&F.set(d.x,d.y);for(let i of W){i.update(),i.draw();let t=E(i,F);t&&i.applyForce(t);for(let s of V){let h=E(i,s.position);h&&i.applyForce(h)}}V.forEach(i=>{i.update(),i.draw()});for(let i=0;i<M.length;i++)for(let t=0;t<M[i].length;t++)M[i][t]=[]}Y();L.animate(Dt);T();

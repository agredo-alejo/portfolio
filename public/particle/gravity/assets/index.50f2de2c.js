var st=Object.defineProperty;var et=(n,t,e)=>t in n?st(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var z=(n,t,e)=>(et(n,typeof t!="symbol"?t+"":t,e),e);const at=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))a(h);new MutationObserver(h=>{for(const l of h)if(l.type==="childList")for(const y of l.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&a(y)}).observe(document,{childList:!0,subtree:!0});function e(h){const l={};return h.integrity&&(l.integrity=h.integrity),h.referrerpolicy&&(l.referrerPolicy=h.referrerpolicy),h.crossorigin==="use-credentials"?l.credentials="include":h.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(h){if(h.ep)return;h.ep=!0;const l=e(h);fetch(h.href,l)}};at();let D=0,ht=300;const P={callback:()=>{},animate:n=>{P.callback=n}},F=()=>{requestAnimationFrame(F);let n=Date.now(),t=n-D,e=1e3/ht;t>e&&(D=n-t%e,P.callback())};var o={},A={};Object.defineProperty(A,"__esModule",{value:!0});A.Vector=void 0;class f{constructor(t=0,e=0,a=0){this.x=t,this.y=e,this.z=a}add(t,e=0,a=0){return typeof t=="number"?(this.x+=t,this.y+=e,this.z+=a,this):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}sub(t,e=0,a=0){return typeof t=="number"?(this.x-=t,this.y-=e,this.z-=a,this):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}mult(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this):this}div(t){return!isFinite(t)||t==0?this:(this.x/=t,this.y/=t,this.z/=t,this)}set(t,e=0,a=0){return typeof t!="number"?(this.x=t.x,this.y=t.y,this.z=t.z,this):(this.x=t,this.y=e,this.z=a,this)}copy(){return new f(this.x,this.y,this.z)}magSq(){return this.x*this.x+this.y*this.y+this.z*this.z}get mag(){return Math.hypot(this.x,this.y,this.z)}set mag(t){this.div(this.mag).mult(t)}normalize(){let t=Math.hypot(this.x,this.y,this.z);return t===0?this.set(0,0,0):this.div(t)}max(t){return this.mag>t.mag?this:t}min(t){return this.mag<t.mag?this:t}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}dist(t){return Math.hypot(this.x-t.x,this.y-t.y,this.z-t.z)}distSq(t){return Math.hypot(this.x-t.x,this.y-t.y,this.z-t.z)**2}cross(t){return new f(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}maxMag(t){let e=Math.hypot(this.x,this.y,this.z);return e>t?this.div(e).mult(t):this}minMag(t){let e=Math.hypot(this.x,this.y,this.z);return e<t?this.div(e).mult(t):this}constrainMag(t,e){let a=Math.hypot(this.x,this.y,this.z);return a<t?this.div(a).mult(t):a>e?this.div(a).mult(e):this}toArray(){return[this.x,this.y,this.z]}changeOfBasis(t=new f(1),e=new f(0,1),a=new f(0,0,1)){let h=this.x,l=this.y,y=this.z;return this.x=h*t.x+l*e.x+y*a.x,this.y=h*t.y+l*e.y+y*a.y,this.z=h*t.z+l*e.z+y*a.z,this}lerp(t,e){const a=Math.min(Math.max(e,0),1);return this.x+=(t.x-this.x)*a,this.y+=(t.y-this.y)*a,this.z+=(t.z-this.z)*a,this}angleBetween(t){let e=this.mag*t.mag;if(e==0)return 0;let a=this.dot(t)/e;return Math.acos(Math.max(Math.min(a,1),-1))}get direction(){return Math.atan2(this.y,this.x)}set direction(t){this.x=Math.cos(t),this.y=Math.sin(t)}set direction3D(t){this.x=Math.sin(t[1])*Math.cos(t[0]),this.y=Math.sin(t[1])*Math.sin(t[0]),this.z=Math.cos(t[1])}get direction3D(){return[Math.atan2(this.y,this.x),Math.atan2(Math.hypot(this.x,this.y),this.z)]}rotate(t){let e=Math.cos(t),a=Math.sin(t),h=this.x;return this.x=h*e+this.y*-a||0,this.y=h*a+this.y*e||0,this}rotateX(t){let e=Math.cos(t),a=Math.sin(t),h=this.y;return this.y=h*e+this.z*-a||0,this.z=h*a+this.z*e||0,this}rotateY(t){let e=Math.cos(t),a=Math.sin(t),h=this.x;return this.x=h*e+this.z*a||0,this.z=h*-a+this.z*e||0,this}}A.Vector=f;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.createVector=n.one=n.zero=n.back=n.forward=n.down=n.up=n.left=n.right=n.scalarProyection=n.random3D=n.random2D=n.fromAngles=n.fromAngle=n.rotateY=n.rotateX=n.rotate=n.angleBetween=n.lerp=n.changeOfBasis=n.toArray=n.dot=n.cross=n.distSq=n.dist=n.equals=n.min=n.max=n.setMag=n.normalize=n.div=n.mult=n.sub=n.add=n.Vector=void 0;const t=A;Object.defineProperty(n,"Vector",{enumerable:!0,get:function(){return t.Vector}});const e=(i,s,r=0,u=0)=>s instanceof t.Vector?new t.Vector(i.x+s.x,i.y+s.y,i.z+s.z):new t.Vector(i.x+s,i.y+r,i.z+u);n.add=e;const a=(i,s,r=0,u=0)=>s instanceof t.Vector?new t.Vector(i.x-s.x,i.y-s.y,i.z-s.z):new t.Vector(i.x-s,i.y-r,i.z-u);n.sub=a;const h=(i,s)=>isFinite(s)?new t.Vector(i.x*s,i.y*s,i.z*s):new t.Vector(i.x,i.y,i.z);n.mult=h;const l=(i,s)=>{if(s!==0&&isFinite(s)){let r=1/s;return new t.Vector(i.x*r,i.y*r,i.z*r)}return new t.Vector(i.x,i.y,i.z)};n.div=l;const y=i=>(0,n.div)(i,Math.hypot(i.x,i.y,i.z));n.normalize=y;const m=(i,s)=>(0,n.div)(i,Math.hypot(i.x,i.y,i.z)).mult(s);n.setMag=m;const c=(i,s)=>i.mag>s.mag?i.copy():s.copy();n.max=c;const O=(i,s)=>i.mag<s.mag?i.copy():s.copy();n.min=O;const V=(i,s)=>i.x==s.x&&i.y==s.y&&i.z==s.z;n.equals=V;const B=(i,s)=>Math.hypot(i.x-s.x,i.y-s.y,i.z-s.z);n.dist=B;const I=(i,s)=>Math.hypot(i.x-s.x,i.y-s.y,i.z-s.z)**2;n.distSq=I;const L=(i,s)=>new t.Vector(i.y*s.z-i.z*s.y,i.z*s.x-i.x*s.z,i.x*s.y-i.y*s.x);n.cross=L;const k=(i,s)=>i.x*s.x+i.y*s.y+i.z*s.z;n.dot=k;const H=i=>[i.x,i.y,i.z];n.toArray=H;const W=(i,s=new t.Vector(1),r=new t.Vector(0,1),u=new t.Vector(0,0,1))=>new t.Vector(i.x*s.x+i.y*r.x+i.z*u.x,i.x*s.y+i.y*r.y+i.z*u.y,i.x*s.z+i.y*r.z+i.z*u.z);n.changeOfBasis=W;const X=(i,s,r)=>new t.Vector(i.x+(s.x-i.x)*r,i.y+(s.y-i.y)*r,i.z+(s.z-i.z)*r);n.lerp=X;const Y=(i,s)=>{let r=i.mag*s.mag;if(r===0)return 0;let u=i.dot(s)/r;return Math.acos(Math.max(Math.min(u,1),-1))};n.angleBetween=Y;const E=(i,s)=>{let r=Math.cos(s),u=Math.sin(s);return new t.Vector(i.x*r+i.y*-u,i.x*u+i.y*r,i.z)};n.rotate=E;const N=(i,s)=>{let r=Math.cos(s),u=Math.sin(s);return new t.Vector(i.x,i.y*r+i.z*-u,i.y*u+i.z*r)};n.rotateX=N;const R=(i,s)=>{let r=Math.cos(s),u=Math.sin(s);return new t.Vector(i.x*r+i.z*u,i.y,i.x*-u+i.z*r)};n.rotateY=R;const K=i=>new t.Vector(Math.cos(i),Math.sin(i));n.fromAngle=K;const G=(i,s)=>new t.Vector(Math.sin(s)*Math.cos(i),Math.sin(s)*Math.sin(i),Math.cos(s));n.fromAngles=G;const J=()=>(0,n.fromAngle)(Math.random()*Math.PI*2);n.random2D=J;const Q=()=>(0,n.fromAngles)(Math.random()*Math.PI*2,Math.random()*Math.PI*2);n.random3D=Q;const T=(i,s,r)=>{let u=(0,n.sub)(s,i),nt=(0,n.sub)(r,i);return u.normalize(),u.mult(nt.dot(u)),(0,n.add)(i,u)};n.scalarProyection=T;const U=()=>new t.Vector(1,0,0);n.right=U;const Z=()=>new t.Vector(-1,0,0);n.left=Z;const _=()=>new t.Vector(0,1,0);n.up=_;const $=()=>new t.Vector(0,-1,0);n.down=$;const j=()=>new t.Vector(0,0,1);n.forward=j;const p=()=>new t.Vector(0,0,-1);n.back=p;const v=()=>new t.Vector;n.zero=v;const tt=()=>new t.Vector(1,1,1);n.one=tt;const it=(i=0,s=0,r=0)=>new t.Vector(i,s,r);n.createVector=it})(o);const rt=n=>{n.clearRect(0,0,n.canvas.width,n.canvas.height)},lt=n=>{n.width=innerWidth,n.height=innerHeight},ut=n=>{addEventListener("resize",()=>lt(n))};class yt{constructor(){z(this,"radius");z(this,"mass");z(this,"position");z(this,"velocity");z(this,"acceleration");this.radius=Math.random()*dt,this.mass=this.radius**2*Math.PI,this.position=new o.Vector(Math.random()*innerWidth,Math.random()*innerHeight),this.velocity=o.random2D().mult(1),this.acceleration=new o.Vector}atraction(t){for(let e=t.length-1;e>=0;e--){if(this===t[e])continue;let a=o.sub(t[e].position,this.position),h=a.mag,l=h*2,y=ot*(this.mass*t[e].mass/l),m=o.setMag(a,y),c=this.radius+t[e].radius;if(h<=c&&this.resolveCollision(t[e]),h<=c*q){this.mass<t[e].mass&&(this.velocity.set(t[e].velocity),this.position.set(t[e].position)),this.mass+=t[e].mass,this.radius=Math.hypot(this.radius,t[e].radius),t.splice(e,1);continue}this.applyForce(m)}}draw(){d.beginPath(),d.arc(this.position.x,this.position.y,this.radius,0,Math.PI*2,!0),d.stroke(),d.closePath(),d.beginPath(),d.arc(this.position.x,this.position.y,this.radius*q,0,Math.PI*2,!0),d.fillStyle="#222",d.fill(),d.closePath()}update(){this.velocity.add(this.acceleration),this.position.add(this.velocity),this.acceleration.mult(0)}applyForce(t){this.acceleration.add(o.div(t,this.mass))}resolveCollision(t){let e=o.sub(this.velocity,t.velocity),a=o.sub(t.position,this.position);if(e.dot(a)>=0){let h=Math.atan2(a.y,a.x),l=this.mass,y=t.mass,m=o.rotate(this.velocity,-h),c=o.rotate(t.velocity,-h);const O=new o.Vector(m.x*(l-y)/(l+y)+c.x*2*y/(l+y),m.y),V=new o.Vector(m.x*2*l/(l+y)+c.x*(y-l)/(l+y),c.y);this.velocity=o.rotate(O,h),t.velocity=o.rotate(V,h),this.velocity.mult(.999),t.velocity.mult(.999)}}}const b=document.querySelector("canvas"),d=b.getContext("2d");let M=[],x,C,ot=.01,q=.2,dt=7;x=175;ut(b);function S(){b.width=innerWidth,b.height=innerHeight,d.strokeStyle="rgba("+200+","+200+","+200+", 1)",C=new o.Vector(innerWidth/2,innerHeight/2),M=[];for(let n=0;n<x;n++)M.push(new yt)}addEventListener("dblclick",S);let g,w;function ct(){rt(d);let n=0;for(let t of M)t.atraction(M),t.mass>n&&(n=t.mass,g=t);for(let t of M)t.update(),t.draw();w=o.sub(C,g.position),w.mag=.025,w.mult(g.mass),g.applyForce(w),g.velocity.mult(.997)}S();P.animate(ct);F();

var at=Object.defineProperty;var rt=(n,t,s)=>t in n?at(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var g=(n,t,s)=>(rt(n,typeof t!="symbol"?t+"":t,s),s);const ut=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))h(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const y of u.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&h(y)}).observe(document,{childList:!0,subtree:!0});function s(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerpolicy&&(u.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?u.credentials="include":a.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function h(a){if(a.ep)return;a.ep=!0;const u=s(a);fetch(a.href,u)}};ut();let B=0,lt=300;const k={callback:()=>{},animate:n=>{k.callback=n}},H=()=>{requestAnimationFrame(H);let n=Date.now(),t=n-B,s=1e3/lt;t>s&&(B=n-t%s,k.callback())};var m={},P={};Object.defineProperty(P,"__esModule",{value:!0});P.Vector=void 0;class z{constructor(t=0,s=0,h=0){this.x=t,this.y=s,this.z=h}add(t,s=0,h=0){return typeof t=="number"?(this.x+=t,this.y+=s,this.z+=h,this):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}sub(t,s=0,h=0){return typeof t=="number"?(this.x-=t,this.y-=s,this.z-=h,this):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}mult(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this):this}div(t){return!isFinite(t)||t==0?this:(this.x/=t,this.y/=t,this.z/=t,this)}set(t,s=0,h=0){return typeof t!="number"?(this.x=t.x,this.y=t.y,this.z=t.z,this):(this.x=t,this.y=s,this.z=h,this)}copy(){return new z(this.x,this.y,this.z)}magSq(){return this.x*this.x+this.y*this.y+this.z*this.z}get mag(){return Math.hypot(this.x,this.y,this.z)}set mag(t){this.div(this.mag).mult(t)}normalize(){let t=Math.hypot(this.x,this.y,this.z);return t===0?this.set(0,0,0):this.div(t)}max(t){return this.mag>t.mag?this:t}min(t){return this.mag<t.mag?this:t}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}dist(t){return Math.hypot(this.x-t.x,this.y-t.y,this.z-t.z)}distSq(t){return Math.hypot(this.x-t.x,this.y-t.y,this.z-t.z)**2}cross(t){return new z(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}maxMag(t){let s=Math.hypot(this.x,this.y,this.z);return s>t?this.div(s).mult(t):this}minMag(t){let s=Math.hypot(this.x,this.y,this.z);return s<t?this.div(s).mult(t):this}constrainMag(t,s){let h=Math.hypot(this.x,this.y,this.z);return h<t?this.div(h).mult(t):h>s?this.div(h).mult(s):this}toArray(){return[this.x,this.y,this.z]}changeOfBasis(t=new z(1),s=new z(0,1),h=new z(0,0,1)){let a=this.x,u=this.y,y=this.z;return this.x=a*t.x+u*s.x+y*h.x,this.y=a*t.y+u*s.y+y*h.y,this.z=a*t.z+u*s.z+y*h.z,this}lerp(t,s){const h=Math.min(Math.max(s,0),1);return this.x+=(t.x-this.x)*h,this.y+=(t.y-this.y)*h,this.z+=(t.z-this.z)*h,this}angleBetween(t){let s=this.mag*t.mag;if(s==0)return 0;let h=this.dot(t)/s;return Math.acos(Math.max(Math.min(h,1),-1))}get direction(){return Math.atan2(this.y,this.x)}set direction(t){this.x=Math.cos(t),this.y=Math.sin(t)}set direction3D(t){this.x=Math.sin(t[1])*Math.cos(t[0]),this.y=Math.sin(t[1])*Math.sin(t[0]),this.z=Math.cos(t[1])}get direction3D(){return[Math.atan2(this.y,this.x),Math.atan2(Math.hypot(this.x,this.y),this.z)]}rotate(t){let s=Math.cos(t),h=Math.sin(t),a=this.x;return this.x=a*s+this.y*-h||0,this.y=a*h+this.y*s||0,this}rotateX(t){let s=Math.cos(t),h=Math.sin(t),a=this.y;return this.y=a*s+this.z*-h||0,this.z=a*h+this.z*s||0,this}rotateY(t){let s=Math.cos(t),h=Math.sin(t),a=this.x;return this.x=a*s+this.z*h||0,this.z=a*-h+this.z*s||0,this}}P.Vector=z;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.createVector=n.one=n.zero=n.back=n.forward=n.down=n.up=n.left=n.right=n.scalarProyection=n.random3D=n.random2D=n.fromAngles=n.fromAngle=n.rotateY=n.rotateX=n.rotate=n.angleBetween=n.lerp=n.changeOfBasis=n.toArray=n.dot=n.cross=n.distSq=n.dist=n.equals=n.min=n.max=n.setMag=n.normalize=n.div=n.mult=n.sub=n.add=n.Vector=void 0;const t=P;Object.defineProperty(n,"Vector",{enumerable:!0,get:function(){return t.Vector}});const s=(i,e,r=0,l=0)=>e instanceof t.Vector?new t.Vector(i.x+e.x,i.y+e.y,i.z+e.z):new t.Vector(i.x+e,i.y+r,i.z+l);n.add=s;const h=(i,e,r=0,l=0)=>e instanceof t.Vector?new t.Vector(i.x-e.x,i.y-e.y,i.z-e.z):new t.Vector(i.x-e,i.y-r,i.z-l);n.sub=h;const a=(i,e)=>isFinite(e)?new t.Vector(i.x*e,i.y*e,i.z*e):new t.Vector(i.x,i.y,i.z);n.mult=a;const u=(i,e)=>{if(e!==0&&isFinite(e)){let r=1/e;return new t.Vector(i.x*r,i.y*r,i.z*r)}return new t.Vector(i.x,i.y,i.z)};n.div=u;const y=i=>(0,n.div)(i,Math.hypot(i.x,i.y,i.z));n.normalize=y;const c=(i,e)=>(0,n.div)(i,Math.hypot(i.x,i.y,i.z)).mult(e);n.setMag=c;const A=(i,e)=>i.mag>e.mag?i.copy():e.copy();n.max=A;const O=(i,e)=>i.mag<e.mag?i.copy():e.copy();n.min=O;const w=(i,e)=>i.x==e.x&&i.y==e.y&&i.z==e.z;n.equals=w;const M=(i,e)=>Math.hypot(i.x-e.x,i.y-e.y,i.z-e.z);n.dist=M;const L=(i,e)=>Math.hypot(i.x-e.x,i.y-e.y,i.z-e.z)**2;n.distSq=L;const W=(i,e)=>new t.Vector(i.y*e.z-i.z*e.y,i.z*e.x-i.x*e.z,i.x*e.y-i.y*e.x);n.cross=W;const X=(i,e)=>i.x*e.x+i.y*e.y+i.z*e.z;n.dot=X;const Y=i=>[i.x,i.y,i.z];n.toArray=Y;const $=(i,e=new t.Vector(1),r=new t.Vector(0,1),l=new t.Vector(0,0,1))=>new t.Vector(i.x*e.x+i.y*r.x+i.z*l.x,i.x*e.y+i.y*r.y+i.z*l.y,i.x*e.z+i.y*r.z+i.z*l.z);n.changeOfBasis=$;const F=(i,e,r)=>new t.Vector(i.x+(e.x-i.x)*r,i.y+(e.y-i.y)*r,i.z+(e.z-i.z)*r);n.lerp=F;const R=(i,e)=>{let r=i.mag*e.mag;if(r===0)return 0;let l=i.dot(e)/r;return Math.acos(Math.max(Math.min(l,1),-1))};n.angleBetween=R;const x=(i,e)=>{let r=Math.cos(e),l=Math.sin(e);return new t.Vector(i.x*r+i.y*-l,i.x*l+i.y*r,i.z)};n.rotate=x;const N=(i,e)=>{let r=Math.cos(e),l=Math.sin(e);return new t.Vector(i.x,i.y*r+i.z*-l,i.y*l+i.z*r)};n.rotateX=N;const K=(i,e)=>{let r=Math.cos(e),l=Math.sin(e);return new t.Vector(i.x*r+i.z*l,i.y,i.x*-l+i.z*r)};n.rotateY=K;const G=i=>new t.Vector(Math.cos(i),Math.sin(i));n.fromAngle=G;const J=(i,e)=>new t.Vector(Math.sin(e)*Math.cos(i),Math.sin(e)*Math.sin(i),Math.cos(e));n.fromAngles=J;const Q=()=>(0,n.fromAngle)(Math.random()*Math.PI*2);n.random2D=Q;const U=()=>(0,n.fromAngles)(Math.random()*Math.PI*2,Math.random()*Math.PI*2);n.random3D=U;const Z=(i,e,r)=>{let l=(0,n.sub)(e,i),ht=(0,n.sub)(r,i);return l.normalize(),l.mult(ht.dot(l)),(0,n.add)(i,l)};n.scalarProyection=Z;const _=()=>new t.Vector(1,0,0);n.right=_;const j=()=>new t.Vector(-1,0,0);n.left=j;const p=()=>new t.Vector(0,1,0);n.up=p;const v=()=>new t.Vector(0,-1,0);n.down=v;const tt=()=>new t.Vector(0,0,1);n.forward=tt;const nt=()=>new t.Vector(0,0,-1);n.back=nt;const it=()=>new t.Vector;n.zero=it;const et=()=>new t.Vector(1,1,1);n.one=et;const st=(i=0,e=0,r=0)=>new t.Vector(i,e,r);n.createVector=st})(m);const yt=Math.PI*2,D=(n,t=1)=>n instanceof Array?`rgba( ${n[0]}, ${n[0]}, ${n[0]}, ${n[1]||1})`:`rgba( ${n}, ${n}, ${n}, ${t})`;function ot(n,t){if(!t){n.fill();return}n.save(),n.fillStyle=t,n.fill(),n.restore()}function C(n,t){if(!t){n.stroke();return}n.save(),n.strokeStyle=t,n.stroke(),n.restore()}const dt=(n,t)=>{if(!t){n.fillRect(0,0,n.canvas.width,n.canvas.height);return}n.save(),n.fillStyle=t,n.fillRect(0,0,n.canvas.width,n.canvas.height),n.restore()},ct=(n,t,s,h,a,u=!0)=>{n.beginPath(),n.arc(t.x,t.y,s||n.lineWidth,h||0,a||yt,u)},I=(n,t,s)=>{n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(s.x,s.y),n.closePath()},o={x:void 0,y:void 0,dragging:!1},ft=n=>{o.x=n.clientX,o.y=n.clientY},gt=n=>{o.x=n.targetTouches[0].pageX,o.y=n.targetTouches[0].pageY},zt=n=>{o.x=n.clientX,o.y=n.clientY,o.dragging=!0},mt=n=>{o.x=n.targetTouches[0].pageX,o.y=n.targetTouches[0].pageY,o.dragging=!0},E=()=>{o.dragging=!1},Mt=()=>{addEventListener("mousemove",ft),addEventListener("touchmove",gt),addEventListener("mousedown",zt),addEventListener("touchstart",mt),addEventListener("mouseup",E),addEventListener("touchend",E)},wt=Math.PI/180,bt=n=>n*wt;let T=()=>{};const At=n=>{T=n},Ot=n=>{n.width=innerWidth,n.height=innerHeight,T()},Vt=n=>{addEventListener("resize",()=>Ot(n))};class b{constructor(t,s,h,a){g(this,"a");g(this,"b");this.a=m.createVector(t,s),this.b=m.createVector(h,a)}show(){d.save(),d.lineWidth=3,I(d,this.a,this.b),C(d,D(200)),d.restore()}}class Pt{constructor(t,s){g(this,"position");g(this,"direction");this.position=t,this.direction=m.fromAngle(s)}show(){}cast(t){let s=t.a.x,h=t.a.y,a=t.b.x,u=t.b.y,y=this.position.x,c=this.position.y,A=this.position.x+this.direction.x,O=this.position.y+this.direction.y,w=(s-a)*(c-O)-(h-u)*(y-A);if(w==0)return;let M=((s-y)*(c-O)-(h-c)*(y-A))/w,L=-((s-a)*(h-c)-(h-u)*(s-y))/w;if(M>0&&M<1&&L>0)return m.createVector(s+M*(a-s),h+M*(u-h))}}class Lt{constructor(){g(this,"position");g(this,"rays");this.position=m.createVector(innerWidth/2,innerHeight/2),this.rays=[];for(let t=0;t<360;t++)this.rays.push(new Pt(this.position,bt(t)))}look(t){for(let s of this.rays){let h=null,a=1/0;for(let u of t){let y=s.cast(u);if(y){let c=m.dist(this.position,y);c<a&&(a=c,h=y)}}h&&(I(d,this.position,h),C(d,D(255,.4)))}}update(t,s){this.position.set(t,s)}show(){ct(d,this.position,1),ot(d,"#fff")}}const V=document.querySelector("canvas"),d=V.getContext("2d");let f,q;function S(){V.width=innerWidth,V.height=innerHeight,f=[];for(let n=0;n<5;n++){let t=Math.random()*innerWidth,s=Math.random()*innerWidth,h=Math.random()*innerHeight,a=Math.random()*innerHeight;f.push(new b(t,h,s,a))}f.push(new b(0,0,innerWidth,0)),f.push(new b(innerWidth,0,innerWidth,innerHeight)),f.push(new b(innerWidth,innerHeight,0,innerHeight)),f.push(new b(0,innerHeight,0,0)),q=new Lt}addEventListener("dblclick",S);function qt(){dt(d,D(50));for(let n of f)n.show();o.x!==void 0&&q.update(o.x,o.y),q.look(f)}S();Vt(V);Mt();At(S);k.animate(qt);H();

const et=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))a(h);new MutationObserver(h=>{for(const l of h)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(h){const l={};return h.integrity&&(l.integrity=h.integrity),h.referrerpolicy&&(l.referrerPolicy=h.referrerpolicy),h.crossorigin==="use-credentials"?l.credentials="include":h.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(h){if(h.ep)return;h.ep=!0;const l=s(h);fetch(h.href,l)}};et();let L=0,st=300;const O={callback:()=>{},animate:n=>{O.callback=n}},P=()=>{requestAnimationFrame(P);let n=Date.now(),t=n-L,s=1e3/st;t>s&&(L=n-t%s,O.callback())};var at={},M={};Object.defineProperty(M,"__esModule",{value:!0});M.Vector=void 0;class g{constructor(t=0,s=0,a=0){this.x=t,this.y=s,this.z=a}add(t,s=0,a=0){return typeof t=="number"?(this.x+=t,this.y+=s,this.z+=a,this):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}sub(t,s=0,a=0){return typeof t=="number"?(this.x-=t,this.y-=s,this.z-=a,this):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}mult(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this):this}div(t){return!isFinite(t)||t==0?this:(this.x/=t,this.y/=t,this.z/=t,this)}set(t,s=0,a=0){return typeof t!="number"?(this.x=t.x,this.y=t.y,this.z=t.z,this):(this.x=t,this.y=s,this.z=a,this)}copy(){return new g(this.x,this.y,this.z)}magSq(){return this.x*this.x+this.y*this.y+this.z*this.z}get mag(){return Math.hypot(this.x,this.y,this.z)}set mag(t){this.div(this.mag).mult(t)}normalize(){let t=Math.hypot(this.x,this.y,this.z);return t===0?this.set(0,0,0):this.div(t)}max(t){return this.mag>t.mag?this:t}min(t){return this.mag<t.mag?this:t}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}dist(t){return Math.hypot(this.x-t.x,this.y-t.y,this.z-t.z)}distSq(t){return Math.hypot(this.x-t.x,this.y-t.y,this.z-t.z)**2}cross(t){return new g(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}maxMag(t){let s=Math.hypot(this.x,this.y,this.z);return s>t?this.div(s).mult(t):this}minMag(t){let s=Math.hypot(this.x,this.y,this.z);return s<t?this.div(s).mult(t):this}constrainMag(t,s){let a=Math.hypot(this.x,this.y,this.z);return a<t?this.div(a).mult(t):a>s?this.div(a).mult(s):this}toArray(){return[this.x,this.y,this.z]}changeOfBasis(t=new g(1),s=new g(0,1),a=new g(0,0,1)){let h=this.x,l=this.y,d=this.z;return this.x=h*t.x+l*s.x+d*a.x,this.y=h*t.y+l*s.y+d*a.y,this.z=h*t.z+l*s.z+d*a.z,this}lerp(t,s){const a=Math.min(Math.max(s,0),1);return this.x+=(t.x-this.x)*a,this.y+=(t.y-this.y)*a,this.z+=(t.z-this.z)*a,this}angleBetween(t){let s=this.mag*t.mag;if(s==0)return 0;let a=this.dot(t)/s;return Math.acos(Math.max(Math.min(a,1),-1))}get direction(){return Math.atan2(this.y,this.x)}set direction(t){this.x=Math.cos(t),this.y=Math.sin(t)}set direction3D(t){this.x=Math.sin(t[1])*Math.cos(t[0]),this.y=Math.sin(t[1])*Math.sin(t[0]),this.z=Math.cos(t[1])}get direction3D(){return[Math.atan2(this.y,this.x),Math.atan2(Math.hypot(this.x,this.y),this.z)]}rotate(t){let s=Math.cos(t),a=Math.sin(t),h=this.x;return this.x=h*s+this.y*-a||0,this.y=h*a+this.y*s||0,this}rotateX(t){let s=Math.cos(t),a=Math.sin(t),h=this.y;return this.y=h*s+this.z*-a||0,this.z=h*a+this.z*s||0,this}rotateY(t){let s=Math.cos(t),a=Math.sin(t),h=this.x;return this.x=h*s+this.z*a||0,this.z=h*-a+this.z*s||0,this}}M.Vector=g;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.createVector=n.one=n.zero=n.back=n.forward=n.down=n.up=n.left=n.right=n.scalarProyection=n.random3D=n.random2D=n.fromAngles=n.fromAngle=n.rotateY=n.rotateX=n.rotate=n.angleBetween=n.lerp=n.changeOfBasis=n.toArray=n.dot=n.cross=n.distSq=n.dist=n.equals=n.min=n.max=n.setMag=n.normalize=n.div=n.mult=n.sub=n.add=n.Vector=void 0;const t=M;Object.defineProperty(n,"Vector",{enumerable:!0,get:function(){return t.Vector}});const s=(i,e,r=0,u=0)=>e instanceof t.Vector?new t.Vector(i.x+e.x,i.y+e.y,i.z+e.z):new t.Vector(i.x+e,i.y+r,i.z+u);n.add=s;const a=(i,e,r=0,u=0)=>e instanceof t.Vector?new t.Vector(i.x-e.x,i.y-e.y,i.z-e.z):new t.Vector(i.x-e,i.y-r,i.z-u);n.sub=a;const h=(i,e)=>isFinite(e)?new t.Vector(i.x*e,i.y*e,i.z*e):new t.Vector(i.x,i.y,i.z);n.mult=h;const l=(i,e)=>{if(e!==0&&isFinite(e)){let r=1/e;return new t.Vector(i.x*r,i.y*r,i.z*r)}return new t.Vector(i.x,i.y,i.z)};n.div=l;const d=i=>(0,n.div)(i,Math.hypot(i.x,i.y,i.z));n.normalize=d;const w=(i,e)=>(0,n.div)(i,Math.hypot(i.x,i.y,i.z)).mult(e);n.setMag=w;const E=(i,e)=>i.mag>e.mag?i.copy():e.copy();n.max=E;const S=(i,e)=>i.mag<e.mag?i.copy():e.copy();n.min=S;const C=(i,e)=>i.x==e.x&&i.y==e.y&&i.z==e.z;n.equals=C;const B=(i,e)=>Math.hypot(i.x-e.x,i.y-e.y,i.z-e.z);n.dist=B;const X=(i,e)=>Math.hypot(i.x-e.x,i.y-e.y,i.z-e.z)**2;n.distSq=X;const Y=(i,e)=>new t.Vector(i.y*e.z-i.z*e.y,i.z*e.x-i.x*e.z,i.x*e.y-i.y*e.x);n.cross=Y;const $=(i,e)=>i.x*e.x+i.y*e.y+i.z*e.z;n.dot=$;const k=i=>[i.x,i.y,i.z];n.toArray=k;const F=(i,e=new t.Vector(1),r=new t.Vector(0,1),u=new t.Vector(0,0,1))=>new t.Vector(i.x*e.x+i.y*r.x+i.z*u.x,i.x*e.y+i.y*r.y+i.z*u.y,i.x*e.z+i.y*r.z+i.z*u.z);n.changeOfBasis=F;const I=(i,e,r)=>new t.Vector(i.x+(e.x-i.x)*r,i.y+(e.y-i.y)*r,i.z+(e.z-i.z)*r);n.lerp=I;const N=(i,e)=>{let r=i.mag*e.mag;if(r===0)return 0;let u=i.dot(e)/r;return Math.acos(Math.max(Math.min(u,1),-1))};n.angleBetween=N;const R=(i,e)=>{let r=Math.cos(e),u=Math.sin(e);return new t.Vector(i.x*r+i.y*-u,i.x*u+i.y*r,i.z)};n.rotate=R;const T=(i,e)=>{let r=Math.cos(e),u=Math.sin(e);return new t.Vector(i.x,i.y*r+i.z*-u,i.y*u+i.z*r)};n.rotateX=T;const j=(i,e)=>{let r=Math.cos(e),u=Math.sin(e);return new t.Vector(i.x*r+i.z*u,i.y,i.x*-u+i.z*r)};n.rotateY=j;const H=i=>new t.Vector(Math.cos(i),Math.sin(i));n.fromAngle=H;const W=(i,e)=>new t.Vector(Math.sin(e)*Math.cos(i),Math.sin(e)*Math.sin(i),Math.cos(e));n.fromAngles=W;const K=()=>(0,n.fromAngle)(Math.random()*Math.PI*2);n.random2D=K;const G=()=>(0,n.fromAngles)(Math.random()*Math.PI*2,Math.random()*Math.PI*2);n.random3D=G;const J=(i,e,r)=>{let u=(0,n.sub)(e,i),it=(0,n.sub)(r,i);return u.normalize(),u.mult(it.dot(u)),(0,n.add)(i,u)};n.scalarProyection=J;const Q=()=>new t.Vector(1,0,0);n.right=Q;const U=()=>new t.Vector(-1,0,0);n.left=U;const Z=()=>new t.Vector(0,1,0);n.up=Z;const _=()=>new t.Vector(0,-1,0);n.down=_;const x=()=>new t.Vector(0,0,1);n.forward=x;const p=()=>new t.Vector(0,0,-1);n.back=p;const v=()=>new t.Vector;n.zero=v;const tt=()=>new t.Vector(1,1,1);n.one=tt;const nt=(i=0,e=0,r=0)=>new t.Vector(i,e,r);n.createVector=nt})(at);const ht=(n,t=1)=>n instanceof Array?`rgba( ${n[0]}, ${n[0]}, ${n[0]}, ${n[1]||1})`:`rgba( ${n}, ${n}, ${n}, ${t})`;function rt(n,t){if(!t){n.fill();return}n.save(),n.fillStyle=t,n.fill(),n.restore()}const ut=(n,t)=>{if(!t){n.fillRect(0,0,n.canvas.width,n.canvas.height);return}n.save(),n.fillStyle=t,n.fillRect(0,0,n.canvas.width,n.canvas.height),n.restore()},lt=(n,t,s,a=10,h)=>{n.beginPath(),n.rect(t,s,a,h||a)},y={x:void 0,y:void 0,dragging:!1},yt=n=>{y.x=n.clientX,y.y=n.clientY},dt=n=>{y.x=n.targetTouches[0].pageX,y.y=n.targetTouches[0].pageY},ft=n=>{y.x=n.clientX,y.y=n.clientY,y.dragging=!0},ot=n=>{y.x=n.targetTouches[0].pageX,y.y=n.targetTouches[0].pageY,y.dragging=!0},q=()=>{y.dragging=!1},gt=()=>{addEventListener("mousemove",yt),addEventListener("touchmove",dt),addEventListener("mousedown",ft),addEventListener("touchstart",ot),addEventListener("mouseup",q),addEventListener("touchend",q)};let D=()=>{};const zt=n=>{D=n},ct=n=>{n.width=innerWidth,n.height=innerHeight,D()},mt=n=>{addEventListener("resize",()=>ct(n))};let m=document.querySelector("canvas"),b=m.getContext("2d"),f,z,c,o;function V(){m.width=innerWidth,m.height=innerHeight,o=3,z=Math.floor(innerWidth/o),c=Math.floor(innerHeight/o),f=[];for(let n=0;n<z;n++){f[n]=[];for(let t=0;t<c;t++)f[n][t]=Math.random()<.07?1:0}}let A=!0;addEventListener("keyup",n=>{n.key===" "&&(A=!A)});addEventListener("dblclick",V);function Mt(){if(y.dragging){let n=Math.floor(y.x/o);if(n<0||n>=z)return;let t=Math.floor(y.y/o);if(t<0||t>=c)return;f[n][t]=1}}function wt(){ut(b,ht(50)),Mt();for(let n=0;n<z;n++)for(let t=0;t<c;t++){let s=n*o,a=t*o,h=o;f[n][t]==1&&(lt(b,s,a,h),rt(b,"#fff"))}if(A){let n=[];for(let t=0;t<z;t++){n[t]=[];for(let s=0;s<c;s++){let a=f[t][s],h=bt(f,t,s);a==0&&h==3?n[t][s]=1:a==1&&(h<2||h>3)?n[t][s]=0:n[t][s]=a}}f=n}}V();mt(m);zt(V);O.animate(wt);P();gt();function bt(n,t,s){let a=0;for(let h=-1;h<2;h++)for(let l=-1;l<2;l++){let d=(t+h+z)%z,w=(s+l+c)%c;a+=n[d][w]}return a-=n[t][s],a}

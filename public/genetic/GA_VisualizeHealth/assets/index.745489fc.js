var zt=Object.defineProperty;var wt=(i,t,e)=>t in i?zt(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var w=(i,t,e)=>(wt(i,typeof t!="symbol"?t+"":t,e),e);const bt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))h(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&h(o)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function h(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}};bt();let x=0,X=300;const E={callback:()=>{},animate:i=>{E.callback=i}},Y=()=>{requestAnimationFrame(Y);let i=Date.now(),t=i-x,e=1e3/X;t>e&&(x=i-t%e,E.callback())},Vt=i=>{X=Math.max(Math.min(300,i),0)};var y={},H={};Object.defineProperty(H,"__esModule",{value:!0});H.Vector=void 0;class M{constructor(t=0,e=0,h=0){this.x=t,this.y=e,this.z=h}add(t,e=0,h=0){return typeof t=="number"?(this.x+=t,this.y+=e,this.z+=h,this):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}sub(t,e=0,h=0){return typeof t=="number"?(this.x-=t,this.y-=e,this.z-=h,this):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}mult(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this):this}div(t){return!isFinite(t)||t==0?this:(this.x/=t,this.y/=t,this.z/=t,this)}set(t,e=0,h=0){return typeof t!="number"?(this.x=t.x,this.y=t.y,this.z=t.z,this):(this.x=t,this.y=e,this.z=h,this)}copy(){return new M(this.x,this.y,this.z)}magSq(){return this.x*this.x+this.y*this.y+this.z*this.z}get mag(){return Math.hypot(this.x,this.y,this.z)}set mag(t){this.div(this.mag).mult(t)}normalize(){let t=Math.hypot(this.x,this.y,this.z);return t===0?this.set(0,0,0):this.div(t)}max(t){return this.mag>t.mag?this:t}min(t){return this.mag<t.mag?this:t}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}dist(t){return Math.hypot(this.x-t.x,this.y-t.y,this.z-t.z)}distSq(t){return Math.hypot(this.x-t.x,this.y-t.y,this.z-t.z)**2}cross(t){return new M(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}maxMag(t){let e=Math.hypot(this.x,this.y,this.z);return e>t?this.div(e).mult(t):this}minMag(t){let e=Math.hypot(this.x,this.y,this.z);return e<t?this.div(e).mult(t):this}constrainMag(t,e){let h=Math.hypot(this.x,this.y,this.z);return h<t?this.div(h).mult(t):h>e?this.div(h).mult(e):this}toArray(){return[this.x,this.y,this.z]}changeOfBasis(t=new M(1),e=new M(0,1),h=new M(0,0,1)){let a=this.x,l=this.y,o=this.z;return this.x=a*t.x+l*e.x+o*h.x,this.y=a*t.y+l*e.y+o*h.y,this.z=a*t.z+l*e.z+o*h.z,this}lerp(t,e){const h=Math.min(Math.max(e,0),1);return this.x+=(t.x-this.x)*h,this.y+=(t.y-this.y)*h,this.z+=(t.z-this.z)*h,this}angleBetween(t){let e=this.mag*t.mag;if(e==0)return 0;let h=this.dot(t)/e;return Math.acos(Math.max(Math.min(h,1),-1))}get direction(){return Math.atan2(this.y,this.x)}set direction(t){this.x=Math.cos(t),this.y=Math.sin(t)}set direction3D(t){this.x=Math.sin(t[1])*Math.cos(t[0]),this.y=Math.sin(t[1])*Math.sin(t[0]),this.z=Math.cos(t[1])}get direction3D(){return[Math.atan2(this.y,this.x),Math.atan2(Math.hypot(this.x,this.y),this.z)]}rotate(t){let e=Math.cos(t),h=Math.sin(t),a=this.x;return this.x=a*e+this.y*-h||0,this.y=a*h+this.y*e||0,this}rotateX(t){let e=Math.cos(t),h=Math.sin(t),a=this.y;return this.y=a*e+this.z*-h||0,this.z=a*h+this.z*e||0,this}rotateY(t){let e=Math.cos(t),h=Math.sin(t),a=this.x;return this.x=a*e+this.z*h||0,this.z=a*-h+this.z*e||0,this}}H.Vector=M;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.createVector=i.one=i.zero=i.back=i.forward=i.down=i.up=i.left=i.right=i.scalarProyection=i.random3D=i.random2D=i.fromAngles=i.fromAngle=i.rotateY=i.rotateX=i.rotate=i.angleBetween=i.lerp=i.changeOfBasis=i.toArray=i.dot=i.cross=i.distSq=i.dist=i.equals=i.min=i.max=i.setMag=i.normalize=i.div=i.mult=i.sub=i.add=i.Vector=void 0;const t=H;Object.defineProperty(i,"Vector",{enumerable:!0,get:function(){return t.Vector}});const e=(n,s,r=0,d=0)=>s instanceof t.Vector?new t.Vector(n.x+s.x,n.y+s.y,n.z+s.z):new t.Vector(n.x+s,n.y+r,n.z+d);i.add=e;const h=(n,s,r=0,d=0)=>s instanceof t.Vector?new t.Vector(n.x-s.x,n.y-s.y,n.z-s.z):new t.Vector(n.x-s,n.y-r,n.z-d);i.sub=h;const a=(n,s)=>isFinite(s)?new t.Vector(n.x*s,n.y*s,n.z*s):new t.Vector(n.x,n.y,n.z);i.mult=a;const l=(n,s)=>{if(s!==0&&isFinite(s)){let r=1/s;return new t.Vector(n.x*r,n.y*r,n.z*r)}return new t.Vector(n.x,n.y,n.z)};i.div=l;const o=n=>(0,i.div)(n,Math.hypot(n.x,n.y,n.z));i.normalize=o;const g=(n,s)=>(0,i.div)(n,Math.hypot(n.x,n.y,n.z)).mult(s);i.setMag=g;const q=(n,s)=>n.mag>s.mag?n.copy():s.copy();i.max=q;const u=(n,s)=>n.mag<s.mag?n.copy():s.copy();i.min=u;const V=(n,s)=>n.x==s.x&&n.y==s.y&&n.z==s.z;i.equals=V;const D=(n,s)=>Math.hypot(n.x-s.x,n.y-s.y,n.z-s.z);i.dist=D;const J=(n,s)=>Math.hypot(n.x-s.x,n.y-s.y,n.z-s.z)**2;i.distSq=J;const Q=(n,s)=>new t.Vector(n.y*s.z-n.z*s.y,n.z*s.x-n.x*s.z,n.x*s.y-n.y*s.x);i.cross=Q;const U=(n,s)=>n.x*s.x+n.y*s.y+n.z*s.z;i.dot=U;const Z=n=>[n.x,n.y,n.z];i.toArray=Z;const j=(n,s=new t.Vector(1),r=new t.Vector(0,1),d=new t.Vector(0,0,1))=>new t.Vector(n.x*s.x+n.y*r.x+n.z*d.x,n.x*s.y+n.y*r.y+n.z*d.y,n.x*s.z+n.y*r.z+n.z*d.z);i.changeOfBasis=j;const _=(n,s,r)=>new t.Vector(n.x+(s.x-n.x)*r,n.y+(s.y-n.y)*r,n.z+(s.z-n.z)*r);i.lerp=_;const v=(n,s)=>{let r=n.mag*s.mag;if(r===0)return 0;let d=n.dot(s)/r;return Math.acos(Math.max(Math.min(d,1),-1))};i.angleBetween=v;const tt=(n,s)=>{let r=Math.cos(s),d=Math.sin(s);return new t.Vector(n.x*r+n.y*-d,n.x*d+n.y*r,n.z)};i.rotate=tt;const it=(n,s)=>{let r=Math.cos(s),d=Math.sin(s);return new t.Vector(n.x,n.y*r+n.z*-d,n.y*d+n.z*r)};i.rotateX=it;const nt=(n,s)=>{let r=Math.cos(s),d=Math.sin(s);return new t.Vector(n.x*r+n.z*d,n.y,n.x*-d+n.z*r)};i.rotateY=nt;const et=n=>new t.Vector(Math.cos(n),Math.sin(n));i.fromAngle=et;const st=(n,s)=>new t.Vector(Math.sin(s)*Math.cos(n),Math.sin(s)*Math.sin(n),Math.cos(s));i.fromAngles=st;const ht=()=>(0,i.fromAngle)(Math.random()*Math.PI*2);i.random2D=ht;const at=()=>(0,i.fromAngles)(Math.random()*Math.PI*2,Math.random()*Math.PI*2);i.random3D=at;const rt=(n,s,r)=>{let d=(0,i.sub)(s,n),Mt=(0,i.sub)(r,n);return d.normalize(),d.mult(Mt.dot(d)),(0,i.add)(n,d)};i.scalarProyection=rt;const lt=()=>new t.Vector(1,0,0);i.right=lt;const dt=()=>new t.Vector(-1,0,0);i.left=dt;const ot=()=>new t.Vector(0,1,0);i.up=ot;const ut=()=>new t.Vector(0,-1,0);i.down=ut;const yt=()=>new t.Vector(0,0,1);i.forward=yt;const ct=()=>new t.Vector(0,0,-1);i.back=ct;const ft=()=>new t.Vector;i.zero=ft;const mt=()=>new t.Vector(1,1,1);i.one=mt;const gt=(n=0,s=0,r=0)=>new t.Vector(n,s,r);i.createVector=gt})(y);const At=Math.PI*2,B=(i,t=0,e=0,h=1)=>i instanceof Array?`rgba( ${i[0]}, ${i[1]}, ${i[2]}, ${i[3]||1})`:`rgba( ${i}, ${t}, ${e}, ${h})`,Ot=(i,t=1)=>i instanceof Array?`rgba( ${i[0]}, ${i[0]}, ${i[0]}, ${i[1]||1})`:`rgba( ${i}, ${i}, ${i}, ${t})`;function k(i,t){if(!t){i.fill();return}i.save(),i.fillStyle=t,i.fill(),i.restore()}const pt=(i,t)=>{i.translate(t.x,t.y)},Pt=(i,t)=>{if(!t){i.fillRect(0,0,i.canvas.width,i.canvas.height);return}i.save(),i.fillStyle=t,i.fillRect(0,0,i.canvas.width,i.canvas.height),i.restore()},R=(i,t,e,h,a,l=!0)=>{i.beginPath(),i.arc(t.x,t.y,e||i.lineWidth,h||0,a||At,l)},Wt=(i,t,e,h,a,l,o)=>{i.beginPath(),i.moveTo(t,e),i.lineTo(h,a),i.lineTo(l,o),i.closePath()},A=(i,t)=>Math.random()*(t-i)+i,$t=i=>i[Math.floor(Math.random()*i.length)],P=(i,t,e)=>Math.max(Math.min(i,e),t),Ct=(i,t,e)=>[(t[0]-i[0])*e+i[0],(t[1]-i[1])*e+i[1],(t[2]-i[2])*e+i[2],(t[3]-i[3])*e+i[3]],Ft=i=>{i.width=innerWidth,i.height=innerHeight},St=i=>{addEventListener("resize",()=>Ft(i))};class I{constructor(t,e){w(this,"position");w(this,"velocity");w(this,"acceleration");w(this,"dna");w(this,"health");this.position=t,this.velocity=y.random2D(),this.acceleration=new y.Vector,this.dna=[],this.health=1;let h=(innerWidth+innerHeight)*.035,a=.5,l=5,o=p/250;if(e==null)this.dna=[Math.random()*l,Math.random()*-l,Math.random()*h,Math.random()*h*a,A(l/2,l),Math.random()*h*a,$t(Ht.slice()),A(.5,1),A(.2,1),Math.random(),Math.random()*o,Math.random()*5,Math.random()*25];else{for(let u=0;u<e.length;u++)u!==6?this.dna[u]=e[u]:this.dna[u]=e[u].slice();if(Math.random()<this.dna[8]){let u=Math.floor(Math.random()*this.dna.length),V=this.dna[u];if(u!==6){let D=A(-1,1);this.dna[u]+=D*V}this.dna[8]=P(this.dna[8],.1,1),this.dna[9]=P(this.dna[9],.1,10),this.dna[10]=Math.min(this.dna[10],o)}}let g=this.dna[6].reduce((u,V)=>u+=V),q=u=>u+=100;g<255&&(this.dna[6]=this.dna[6].map(q))}edges(){let t=10,e=null;if(this.position.x<t?e=new y.Vector(this.dna[10],this.velocity.y):this.position.x>innerWidth-t&&(e=new y.Vector(-this.dna[10],this.velocity.y)),this.position.y<t?e=new y.Vector(this.velocity.x,this.dna[10]):this.position.y>innerHeight-t&&(e=new y.Vector(this.velocity.x,-this.dna[10])),e!==null){e.mag=this.dna[10];let h=y.sub(e,this.velocity);h.maxMag(this.dna[11]*2),this.applyForce(h)}}seek(t){let e=y.sub(t,this.position);e.mag=this.dna[10];let h=y.sub(e,this.velocity);return h.maxMag(this.dna[11]),h}eat(t,e,h){let a=1/0,l=null;for(let o=t.length-1;o>=0;o--){let g=this.position.dist(t[o]);g<this.dna[10]?(t.splice(o,1),t.push(y.createVector(Math.random()*innerWidth,Math.random()*innerHeight)),this.health+=e):g<a&&g<h&&(a=g,l=t[o])}return l!==null?this.seek(l):new y.Vector}behaviors(t,e){let h=this.eat(t,.3,this.dna[2]),a=this.eat(e,-500,this.dna[3]);h.mult(this.dna[0]),a.mult(this.dna[1]),this.applyForce(h),this.applyForce(a)}dead(){return this.health<0}clone(){if(Math.random()<this.dna[7]&&this.health>2){let t=this.position.copy(),e=y.random2D();return e.mult(this.dna[12]),t.add(e),this.health=1,new I(t,this.dna.slice())}else return null}draw(){f.save(),pt(f,this.position),f.rotate(this.velocity.direction);let t=Ct([255,0,0],[0,255,0],this.health);Wt(f,z*1.75,0,z*-.5,z*.8,z*-.5,z*-.8),k(f,B(t)),f.restore()}edges2(){this.position.x>innerWidth?this.position.x=0:this.position.x<0&&(this.position.x=innerWidth),this.position.y>innerHeight?this.position.y=0:this.position.y<0&&(this.position.y=innerHeight)}update(){this.edges(),this.health-=.0075;for(let t=0;t<c.length;t++)this!==c[t]&&this.position.dist(c[t].position)<3&&(this.health=.5);this.velocity.add(this.acceleration),this.velocity.maxMag(this.dna[10]),this.position.add(this.velocity),this.acceleration.mult(0)}applyForce(t){this.acceleration.add(t)}}const W=document.querySelector("canvas"),f=W.getContext("2d");let c,$,C,N=50,b,O;const Ht=[[255,255,0],[0,255,255]];addEventListener("dblclick",K);const qt=()=>{let i=Math.random()*innerWidth,t=Math.random()*innerHeight;$.push(y.createVector(i,t))},Dt=()=>{let i=Math.random()*innerWidth,t=Math.random()*innerHeight;C.push(y.createVector(i,t))},G=i=>{for(let t=0;t<i;t++){let e=Math.random()*innerWidth,h=Math.random()*innerHeight,a=y.createVector(e,h);c.push(new I(a))}};let T,p,z;St(W);function K(){W.width=innerWidth,W.height=innerHeight,T=y.createVector(innerWidth,innerHeight),p=T.mag,O=0,b=2,b=innerWidth*innerHeight/8e3*b,O=b*1;let i=Math.min(innerHeight,innerWidth);innerWidth==i&&(O=b*2),z=p/200,innerWidth==i&&(z=p/125),c=[],$=[],C=[],G(N);for(let t=0;t<O;t++)qt();for(let t=0;t<b;t++)Dt()}let m=1;addEventListener("keydown",i=>{i.keyCode==37&&(m-=3),i.keyCode==39&&(m+=1),m=P(m,0,70)});let F=!1,S=!1;addEventListener("touchstart",i=>{i.targetTouches[0].pageX>innerWidth/2?F=!0:S=!0});addEventListener("touchend",()=>{F&&(F=!1),S&&(S=!1)});let L=0;function Lt(){Pt(f,Ot(50)),L%2==0&&(F&&(m+=2),S&&(m-=2),m=P(m,0,70),L=0),L++;for(let t=0;t<m;t++){c.length==0&&G(N);for(let e=c.length-1;e>=0;e--){c[e].behaviors($,C),c[e].update();let h=c[e].clone();h!==null&&c.unshift(h),c[e].dead()&&c.splice(e,1)}}let i=1.5;$.forEach(t=>{R(f,t,i),k(f,B(0,255,0))}),C.forEach(t=>{R(f,t,i),k(f,B(255,0,0))}),c.forEach(t=>{t.draw()})}K();E.animate(Lt);Y();Vt(30);
